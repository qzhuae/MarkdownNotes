# COMP5331 KDD

## Data Warehouse

`Online Analytical Processing` OLAP

Data Warehouse stores pre-computed results to have __fast query response__

Parts are bought from suppliers and then sold to customers at a sale price SP

| part        | supplier         | customer  | SP |
| :-------------: |:-------------:| :-----:| :---: |
|p1|s1|c1|4|
|p3|s1|c2|3|
|p2|s3|c1|7|
|...|...|...|...|

Consider a data cube with dimensions, c, p, s.

[Image Placeholder]

__Example 1__

Select part, customer, SUM(SP) from table T group by part, customer

We can also use AVG(SP), MAX(SP), MIN(SP)

__Example 2__

Select customer, SUM(SP) from table T group by customer

`Materialize` all views wastes a lot of space. 

* Materialize the top view only

* Materialize the top view and the view for ps only

Gain({view for ps, top view}, {top view}) = 5.2 * 3 = 15.6

`Selective Materialization Problem`

We can select a set V of k views such that Gain( V \cup {top view}, {top view}) is maximized

This problem is NP-Hard. `Selective Materialization Decision Problem` SMD

Given an integer k and a real number J, we want to find a set V of k views such that Gain(V \cup {topview}, {topview}) is at least J

This problem is NP-Hard.

`Exact Cover by 3-Sets` (XC) NP-Complete

Instance: Set X with 3q elements, and a collection C of size 3 subsets of X

Question: Does C contain an exact cover for X? i.e. a subcollection C' \in C such that every element of X occurs in exactly one set of C'

Problem XC can be transformed to Problem SMD

- Create a root node with size 200 Level 1

- Create a bottom node with size 1 Level 4

- For each element x in X, 
  - Create node N_x with size 50 
  - Create an edge between N_x and the bottom node

- For each element a \in C where a = (x,y,z)
  - Create a node N_a with size 100 at level 2
  - Create an edge between N_a and the root
  - Create an edge between N_a and N_x
  - Create an edge between N_a and N_y
  - Create an edge between N_a and N_z
 
- Set k = q, J = 400q

We need to verify that solving the problem SMD is equal to solving problem XC. That means Problem SMD is NP-HARD.




